(()=>{"use strict";const e=window.wp.blockEditor,t=window.wp.components,n=window.wp.element,a=window.wp.i18n,s=window.wp.richText,o=window.React,i=window.wp.primitives,r=(0,o.createElement)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(i.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})),l=(0,o.createElement)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(i.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})),c=window.ReactJSXRuntime,d="yours59/text-animator",m=({text:e})=>(0,c.jsx)(t.Tooltip,{text:e,children:(0,c.jsx)(t.Button,{children:(0,c.jsx)(t.Dashicon,{icon:"info"})})}),x=({label:a,color:s,onChangeComplete:o})=>{const[i,r]=(0,n.useState)(!1);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(t.ColorIndicator,{colorValue:s,onClick:()=>r(!i)}),i&&(0,c.jsx)(e.URLPopover,{onClose:()=>r(!1),children:(0,c.jsx)(e.ColorPalette,{value:s,onChange:e=>{o(e),r(!1)}})})]})},h=(0,c.jsx)("svg",{width:20,height:20,viewBox:"0 0 16 16",children:(0,c.jsx)("path",{d:"M12.5,12H12v-0.5c0-0.3-0.2-0.5-0.5-0.5H11V6h1l1-2c-1,0.1-2,0.1-3,0C9.2,3.4,8.6,2.8,8,2V1.5C8,1.2,7.8,1,7.5,1 S7,1.2,7,1.5V2C6.4,2.8,5.8,3.4,5,4C4,4.1,3,4.1,2,4l1,2h1v5c0,0-0.5,0-0.5,0C3.2,11,3,11.2,3,11.5V12H2.5C2.2,12,2,12.2,2,12.5V13 h11v-0.5C13,12.2,12.8,12,12.5,12z M7,11H5V6h2V11z M10,11H8V6h2V11z"})}),p=({value:e,onChange:s,onClose:o})=>{const[i,h]=(0,n.useState)((e=>{let t={};if(e?.activeFormats){const n=e.activeFormats.filter((e=>e.type===d));n&&n.length&&(t=JSON.parse(n[0].attributes.animatedata))}const n=e.text.substring(e.start,e.end);return t=Object.assign({general:{repeat:!0,start_animation_after:2e3},texts:[{name:n,stay_for:2e3,color:""}]},t),t})(e)),p=e=>{h(e),s(e)};return(0,c.jsx)("div",{className:"word-animation-form",children:(0,c.jsxs)(t.Panel,{children:[(0,c.jsxs)(t.PanelBody,{title:"Word-replacement Animations",initialOpen:!0,children:[(0,c.jsxs)("div",{className:"word-item tableheader-free",children:[(0,c.jsx)("span",{}),(0,c.jsxs)("span",{children:[(0,c.jsx)("span",{children:"Time"}),(0,c.jsx)(m,{text:"Time the word is visible in Milliseconds"})]}),(0,c.jsx)("span",{children:(0,c.jsx)(m,{text:"Text Color. Clear to reset"})})]},"tableheader"),i.texts.map(((e,n)=>(0,c.jsxs)("div",{className:"word-item",children:[(0,c.jsx)(t.TextControl,{value:e.name,onChange:e=>{const t={...i};t.texts[n].name=e,p(t)}}),(0,c.jsx)(t.__experimentalNumberControl,{value:e.stay_for,onChange:e=>{const t={...i};t.texts[n].stay_for=parseInt(e,10)||0,p(t)},min:0,max:1e5,step:250}),(0,c.jsx)(x,{color:e.color,onChangeComplete:e=>{const t={...i};t.texts[n].color=e,p(t)}}),(0,c.jsx)(t.Button,{icon:r,onClick:()=>(e=>{const t={...i};t.texts.splice(e,1),p(t)})(n)})]},n))),(0,c.jsxs)("div",{className:"row-add-delete",children:[(0,c.jsx)(t.Button,{icon:l,onClick:()=>{const e={...i};e.texts.push({name:"",stay_for:2e3,color:""}),p(e)},disabled:i.texts.length>=3,children:(0,a.__)("Add Word","yours59")}),(0,c.jsx)(t.Button,{isDestructive:!0,onClick:()=>{const e={...i,texts:[]};p(e),o()},className:"delete-all-words",children:(0,a.__)("Remove All / Delete","yours59")})]})]}),(0,c.jsxs)(t.PanelBody,{className:"y59-span-animate-general-container",title:"General / Info",initialOpen:!0,children:[(0,c.jsx)(t.CheckboxControl,{label:"Repeat Animation?",checked:i.general.repeat,onChange:e=>{const t={...i};t.general.repeat=e,p(t)}}),(0,c.jsx)(t.__experimentalNumberControl,{label:"Delay of Animation on start (in Milliseconds). First word stays for this time and the time set for the first word",value:i.general.start_animation_after,onChange:e=>{const t={...i};t.general.start_animation_after=parseInt(e,10)||0,p(t)},min:0,max:1e4})]})]})})};(0,s.registerFormatType)(d,{className:"yours59-animate-text-change-in-marks",edit:s=>{const{isActive:o,onChange:i,value:r}=s,[l,m]=(0,n.useState)(!1),x=(0,n.useCallback)((e=>{if(e?.texts&&e.texts.length>1){const t={animatedata:JSON.stringify(e)};i(wp.richText.applyFormat(r,{type:d,attributes:t}))}else i(wp.richText.removeFormat(r,d))}),[i,r]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(e.RichTextToolbarButton,{icon:h,isActive:o,onClick:()=>m(!0),title:(0,a.__)("Animate-Texts","yours59")},o?"text-animation":""),l&&(0,c.jsx)("div",{className:"y59-span-animate-editor-container",children:(0,c.jsx)(t.Popover,{expandOnMobile:!0,focusOnMount:!0,className:"components-inline-color-popover",placement:"bottom",onClose:()=>m(!1),children:(0,c.jsx)("div",{className:"y59-json-editor-wrapper",children:(0,c.jsx)(p,{value:r,onChange:x,onClose:()=>m(!1)})})})})]})},tagName:"span",attributes:{animatedata:"animatedata"},title:(0,a.__)("Span Animations","yours59")})})();