(()=>{"use strict";const e=window.wp.blockEditor,t=window.wp.components,n=window.wp.element,a=window.wp.i18n,i=window.wp.richText,s=window.React,o=window.wp.primitives,r=(0,s.createElement)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,s.createElement)(o.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})),l=(0,s.createElement)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,s.createElement)(o.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})),c=window.ReactJSXRuntime,m="yours59/text-animator",x=(0,c.jsx)("svg",{width:20,height:20,viewBox:"0 0 16 16",children:(0,c.jsx)("path",{d:"M12.5,12H12v-0.5c0-0.3-0.2-0.5-0.5-0.5H11V6h1l1-2c-1,0.1-2,0.1-3,0C9.2,3.4,8.6,2.8,8,2V1.5C8,1.2,7.8,1,7.5,1 S7,1.2,7,1.5V2C6.4,2.8,5.8,3.4,5,4C4,4.1,3,4.1,2,4l1,2h1v5c0,0-0.5,0-0.5,0C3.2,11,3,11.2,3,11.5V12H2.5C2.2,12,2,12.2,2,12.5V13 h11v-0.5C13,12.2,12.8,12,12.5,12z M7,11H5V6h2V11z M10,11H8V6h2V11z"})}),d=({value:e,onChange:i,onClose:s})=>{const[o,x]=(0,n.useState)((e=>{let t={};if(e?.activeFormats){const n=e.activeFormats.filter((e=>e.type===m));n&&n.length&&(t=JSON.parse(n[0].attributes.animatedata))}const n=e.text.substring(e.start,e.end);return t=Object.assign({general:{repeat:!0,start_animation_after:2e3},texts:[{name:n,stay_for:2}]},t),t})(e)),d=e=>{x(e),i(e)};return(0,c.jsx)("div",{className:"word-animation-form",children:(0,c.jsxs)(t.Panel,{children:[(0,c.jsxs)(t.PanelBody,{title:"Word-replacement Animations",initialOpen:!0,children:[o.texts.map(((e,n)=>(0,c.jsxs)("div",{className:"word-item",children:[(0,c.jsx)(t.TextControl,{value:e.name,onChange:e=>{const t={...o};t.texts[n].name=e,d(t)}}),(0,c.jsx)(t.__experimentalNumberControl,{value:e.stay_for,onChange:e=>{const t={...o};t.texts[n].stay_for=parseFloat(e)||0,d(t)},min:0,max:100,step:.25}),(0,c.jsx)(t.Button,{icon:r,onClick:()=>(e=>{const t={...o};t.texts.splice(e,1),d(t)})(n)})]},n))),(0,c.jsx)(t.Button,{icon:l,onClick:()=>{const e={...o};e.texts.push({name:"",stay_for:2}),d(e)},disabled:o.texts.length>=2,children:(0,a.__)("Add Word","yours59")})]}),(0,c.jsxs)(t.PanelBody,{title:"General Settings",initialOpen:!0,children:[(0,c.jsx)(t.CheckboxControl,{label:"Repeat Animation?",checked:o.general.repeat,onChange:e=>{const t={...o};t.general.repeat=e,d(t)}}),(0,c.jsx)(t.__experimentalNumberControl,{label:"Delay of Animation (ms)",value:o.general.start_animation_after,onChange:e=>{const t={...o};t.general.start_animation_after=parseInt(e,10)||0,d(t)},min:0,max:1e4})]})]})})};(0,i.registerFormatType)(m,{className:"yours59-animate-text-change-in-marks",edit:i=>{const{isActive:s,onChange:o,value:r}=i,[l,h]=(0,n.useState)(!1),p=(0,n.useCallback)((e=>{if(e?.texts&&e.texts.length>1){const t={animatedata:JSON.stringify(e)};o(wp.richText.applyFormat(r,{type:m,attributes:t}))}else o(wp.richText.removeFormat(r,m))}),[o,r]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(e.RichTextToolbarButton,{icon:x,isActive:s,onClick:()=>h(!0),title:(0,a.__)("Animate-Texts","yours59")},s?"text-animation":""),l&&(0,c.jsx)(t.Popover,{expandOnMobile:!0,focusOnMount:!0,onClose:()=>h(!1),children:(0,c.jsx)(d,{value:r,onChange:p,onClose:()=>h(!1)})})]})},tagName:"span",attributes:{animatedata:"animatedata"},title:(0,a.__)("Span Animations","yours59")})})();