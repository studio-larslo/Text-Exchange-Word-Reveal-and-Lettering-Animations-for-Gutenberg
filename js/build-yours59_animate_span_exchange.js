(()=>{const t=new WeakMap,e="idle",s="transitioning";function n(s){const n=t.get(s);n&&(n.timeouts.forEach(clearTimeout),n.timeouts=[],n.state=e,t.set(s,n),s.classList.remove("--clip-in","--clip-out"))}function o(t,e){requestAnimationFrame((()=>{t.classList.remove("--clip-in","--clip-out"),t.classList.add(e)}))}function a(t,e){t.querySelectorAll("span").forEach(((t,s)=>{e===s?(t.classList.add("on"),t.classList.remove("off")):(t.classList.remove("on"),t.classList.add("off"))}))}function i(t,e,s,n={}){return`<span data-index="${s}" style="color:${n.color};" class="${e}">${t}</span>`}window.addEventListener("load",(function(){const r=document.querySelectorAll(".yours59-animate-text-change-in-marks"),c={threshold:[1]};r.forEach((r=>{new IntersectionObserver(((c,l)=>{if(c[0].isIntersecting){const c=(t.get(r)||{}).data||JSON.parse(r.getAttribute("animatedata"));n(r),function(r){n(r);try{var c;const n=r.getAttribute("animatedata");if(console.log(n),!n)throw new Error("No animation data found");console.log("after",n);const l=JSON.parse(n);if(!function(t){return t&&Array.isArray(t.texts)&&t.texts.length>0&&t.texts.length<=3}(l))throw new Error("Invalid animation data");const u=r.innerText,d=[];for(;r.firstChild;)r.removeChild(r.firstChild);for(let t=0;t<l.texts.length;t++){const e=l.texts[t];d.push({i:t,word:e.name}),r.insertAdjacentHTML("beforeend",i(e.name,"off",t,e))}const f=600;r.style.setProperty("--animationduration",`${f}ms`),r.classList.add("clip-r"),t.set(r,{timeouts:[],defaultText:u,textSpans:d,data:l,currentIndex:0,state:e}),r.classList.add("clip-r"),a(r,0),r.classList.add("--clip-in");const m=null!==(c=l.general.start_animation_after)&&void 0!==c?c:2e3,p=setTimeout((()=>function(n){const i=t.get(n),{textSpans:r,data:c}=i;let{currentIndex:l}=i;a(n,l),n.classList.add("--clip-in"),i.state=s,function s(){if(i.state===e)return;const u=c.texts[l].stay_for,d=setTimeout((()=>{o(n,"--clip-out");const u=setTimeout((()=>{l=(l+1)%r.length,a(n,l);const u=setTimeout((()=>{o(n,"--clip-in")}),20);if(i.timeouts.push(u),c.general.repeat||l<r.length-1){const t=c.texts[l].stay_for,e=setTimeout(s,t+600);i.timeouts.push(e)}else i.state=e;i.currentIndex=l,t.set(n,i)}),600);i.timeouts.push(u)}),u);i.timeouts.push(d)}()}(r)),m);t.get(r).timeouts.push(p)}catch(t){console.error("Error in init_text_change_animation:",t)}}(r),(c.general&&c.general.do_not_restart_on_following_enters||0===Object.keys(c).length)&&l.unobserve(r)}else n(r)}),c).observe(r)}))}))})();